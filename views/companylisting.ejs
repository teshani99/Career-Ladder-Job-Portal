<!-- <!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="/table.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <title>Listed Jobs</title>

  <script src="../js/jquery.min.js"></script>
  <script src="../js/jquery.dataTables.min.js"></script>
  <script src="../js/dataTables.bootstrap4.min.js"></script>

  <style>
    .dataTables_wrapper .dataTables_filter {
      float: right;
    }

    .dataTables_wrapper .dataTables_paginate {
      float: right;
    }
    body{
      background-color: rgb(234, 248, 243);
    }
  </style>

</head>

<body>







  <div class="container mt-5">
    <% if (Object.keys(groupedJobs).length > 0) { %>
      <% Object.keys(groupedJobs).forEach(jobtitle => { %>
        <h3>
          <% if (groupedJobs[jobtitle][0].jlogo) { %>
            <img src="/upload/<%= groupedJobs[jobtitle][0].jlogo %>" alt="jlogo" style="max-width: 50px; max-height: 100px;">
            
          <% } else { %>
            No Photo
          <% } %>
          <%= jobtitle %>
        </h3>
        <table class="table table-bordered dataTable no-footer" id="dataTable" width="100%" cellspacing="0" role="grid" aria-describedby="dataTable_info">
          <thead>
            <tr>
              <th>Profile Pic</th>
              <th>Candidate Name</th>
              <th>Email</th>
              <th>Applied Date</th>
              <th>Applied Time</th>
             
              <th>Experience(Years)</th>
              <th>Operations</th>
            </tr>
          </thead>
          <tbody>
            
            <% groupedJobs[jobtitle].applicants.forEach(applicant => { %>
              <tr>
                <td><img src="/upload/<%= applicant.profilePic %>" alt="profilePic" style="max-width: 50px; max-height: 100px;"></td>
               
               
                <td><%= applicant.userId.name %></td>
                <td><%= applicant.userId.email %></td>
                <td><%= new Date(applicant.createdAt).toISOString().slice(0, 10) %></td>

                <td><%= new Date(applicant.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) %></td>
                

                <td><%= applicant.experience %></td>
                <td>
                  <div class="btn-group" role="group">
                    <a class="btn btn-primary" href="/viewprofile/<%= applicant.profileid %>">View Profile</a>
                    <form style="display: inline;" action="/delete/<%= applicant.profileid %>?_method=DELETE" method="POST">
                      <button style="cursor: pointer;" type="submit" class="btn btn-danger ml-2">Delete</button>
                    </form>
                  </div>
                </td>
              </tr>
            <% }); %>
          </tbody>
        </table>
      <% }); %>
    <% } else { %>
      <p>No job listings found for this company.</p>
    <% } %>
  </div>

        <!-- Modal -->
        <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="imageModalLabel"> Photo</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <img id="modalImage" src="" alt="Prescription Photo" style="max-width: 100%;">
              </div>
            </div>
          </div>
        </div>


















        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script>
          function updateModalImage(imageUrl) {
            var modalImage = document.getElementById('modalImage');
            modalImage.src = imageUrl;
          }
        </script>
        <script src="../assets_DB/bootstrap/js/bootstrap.min.js"></script>
        <script src="../assets_DB/js/chart.min.js"></script>
        <script src="../assets_DB/js/bs-init.js"></script>
        <script src="../assets_DB/js/theme.js"></script>
        <script>
          $(document).ready(function () {
            $('.dataTable').each(function () {


              $(this).DataTable({
                pageLength: 5,
                lengthMenu: [[5, 10, 20, -1], [5, 10, 20, 'Todos']],

                "paging": true,
                "ordering": true,
                "searching": true,
                "info": true,



              });
            });

          });



        </script>



</body>

</html> -->